{"version":3,"sources":["actions/index.js","components/app.js","reducers/index.js","index.js"],"names":["updateSearchKey","key","type","filterMovies","asyncFilterMovies","dispatch","Promise","resolve","reject","then","getMovies","page","axios","get","concat","res","movies","data","content","catch","error","console","log","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleScroll","event","window","innerHeight","scrollY","document","body","offsetHeight","state","setState","fetchMovies","posts","searchKey","init","isVisible","isMobile","handleSearch","bind","assertThisInitialized","showHead","onKeyDown","actions","addEventListener","removeEventListener","image","index","length","react_default","a","createElement","LazyLoad_default","style","alignItems","overflow","width","src","alt","_this2","map","post","Col","xs","float","marginBottom","marginRight","marginLeft","display","paddingBottom","genImage","color","fontSize","name","e","preventDefault","target","value","trim","search","keyCode","_this3","position","top","marginTop","maxHeight","height","paddingTop","onChange","border","backgroundColor","outline","onClick","paddingRight","renderMovies","showPosts","renderHead","className","Grid","Row","right","padding","margin","backgroundPosition","backgroundSize","backgroundImage","bottom","left","paddingLeft","Component","connect","bindActionCreators","initalState","rootReducer","combineReducers","arguments","undefined","action","toConsumableArray","regex","RegExp","toLowerCase","newState","filter","movie","test","objectSpread","store","createStore","reducers","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","es","app","getElementById"],"mappings":"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","file":"static/js/main.dd19c749.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport const getMovies2 = movies => ({\n  type: \"GET_MOVIES\",\n  movies\n});\n\nexport const updateSearchKey = key => ({\n  type: \"UPDATE_SEARCH_KEY\",\n  key\n});\n\nexport const filterMovies = key => ({\n  type: \"Filter_MOVIES\",\n  key\n});\n\nexport const asyncFilterMovies = key => {\n  return dispatch => {\n    new Promise((resolve, reject) => {\n      //dispatch(getMovies(1));\n      resolve();\n    }).then(() => {\n      dispatch(filterMovies(key));\n    });\n  };\n};\n\nexport const getMovies = page => {\n  return dispatch => {\n    axios\n      .get(`CONTENTLISTINGPAGE-PAGE${page}.json`)\n      .then(res => {\n        dispatch(getMovies2(res.data.page[\"content-items\"].content));\n      })\n      .catch(error => {\n        console.log(`error: ${error}`);\n      });\n  };\n};\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { Grid, Row, Col } from \"react-bootstrap\";\nimport LazyLoad from \"react-lazy-load\";\nimport { isMobile } from \"react-device-detect\";\nimport {\n  getMovies,\n  updateSearchKey,\n  filterMovies,\n  asyncFilterMovies\n} from \"../actions\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      posts: [],\n      searchKey: \"\",\n      page: 1,\n      init: true,\n      isVisible: false,\n      isMobile: false\n    };\n    this.handleSearch = this.handleSearch.bind(this);\n    this.showHead = this.showHead.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.actions.getMovies(this.state.page);\n    window.addEventListener(\"scroll\", this.handleScroll);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  }\n\n  genImage(image, index, length) {\n    return (\n      <LazyLoad>\n        <div\n          style={{\n            alignItems: \"center\",\n            overflow: \"hidden\"\n          }}\n        >\n          <img\n            style={{\n              width: \"100%\"\n            }}\n            src={\n              `./assets/${image}` ||\n              `./assets/placeholder_for_missing_posters.png`\n            }\n            alt={`./assets/placeholder_for_missing_posters.png`}\n          />\n        </div>\n      </LazyLoad>\n    );\n  }\n\n  showPosts() {\n    return this.props.movies.length > 1 ? (\n      this.props.movies.map((post, index) => {\n        const image = post[\"poster-image\"];\n        return (\n          <Col\n            xs={4}\n            key={index}\n            style={{\n              float: \"left\",\n              marginBottom: \"45px\",\n              marginRight: \"0px\",\n              marginLeft: \"0px\"\n            }}\n          >\n            <div\n              style={{\n                display: \"inline-block\"\n              }}\n            >\n              <div style={{ paddingBottom: \"10px\" }}>\n                {this.genImage(image, index, this.props.movies.length)}\n              </div>\n              <p style={{ color: \"#ffffff\", fontSize: \"3vw\" }}>{post.name}</p>\n            </div>\n          </Col>\n        );\n      })\n    ) : (\n      <div>Loading...</div>\n    );\n  }\n\n  handleSearch(e) {\n    e.preventDefault();\n    this.setState({ searchKey: e.target.value });\n    if (e.target.value.trim().length > 1) {\n      this.props.actions.updateSearchKey(this.state.searchKey);\n      this.props.actions.asyncFilterMovies(this.props.search.searchKey);\n    }\n    return;\n  }\n\n  onKeyDown(e) {\n    if (e.keyCode === 8) {\n      this.setState({ searchKey: \"\" });\n      this.props.actions.getMovies(this.state.page);\n      this.props.actions.updateSearchKey(\"\");\n    }\n  }\n\n  showHead() {\n    return (\n      <div style={{ position: \"sticky\", top: \"0\" }}>\n        <div\n          style={{\n            marginTop: \"30px\",\n            marginBottom: \"30px\",\n            maxHeight: \"190px\"\n          }}\n        >\n          <input\n            type=\"image\"\n            src=\"./assets/Back.png\"\n            alt=\"back\"\n            width=\"28\"\n            height=\"28\"\n            style={{ display: \"inline\", float: \"left\", paddingTop: \"0px\" }}\n          />\n          <span>\n            <input\n              type=\"text\"\n              onChange={e => this.handleSearch(e)}\n              onKeyDown={this.onKeyDown}\n              value={this.state.searchKey}\n              style={{\n                border: \"1px solid #2c2c2d\",\n                display: \"inline\",\n                backgroundColor: \"#131314\",\n                color: \"#ffffff\",\n                fontSize: \"4vw\",\n                marginLeft: \"20px\",\n                outline: \"none\"\n              }}\n            />\n          </span>\n          <input\n            type=\"image\"\n            src=\"./assets/search.png\"\n            alt=\"search\"\n            width=\"48\"\n            height=\"28\"\n            onClick={e => this.handleSearch(e)}\n            style={{\n              display: \"inline\",\n              float: \"right\",\n              paddingTop: \"0px\",\n              paddingRight: \"20px\"\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n  fetchMovies(page) {\n    console.log(`new movies for page ${page}`);\n    this.props.actions.getMovies(this.state.page);\n  }\n\n  handleScroll = event => {\n    if (\n      window.innerHeight + window.scrollY >=\n      document.body.offsetHeight - 400\n    ) {\n      if (this.state.page < 3) {\n        this.setState({ page: this.state.page + 1 });\n        this.fetchMovies(this.state.page);\n      }\n\n      console.log(`looks like yeah `);\n    }\n  };\n\n  render() {\n    const renderMovies = this.showPosts();\n    const renderHead = this.showHead();\n    return isMobile ? (\n      <div className=\"\">\n        <div>{renderHead}</div>\n        <Grid>\n          <div>\n            <Row>{renderMovies}</Row>\n          </div>\n        </Grid>\n      </div>\n    ) : (\n      <div>\n        <p\n          style={{\n            color: \"#ffffff\",\n            fontSize: \"25px\",\n            paddingTop: \"30px\",\n            right: \"50%\"\n          }}\n        >\n          React JS/ Workshop/ Diagnal technologies\n        </p>\n        <div\n          style={{\n            padding: 0,\n            margin: 0,\n            marginTop: \"30px\",\n            backgroundPosition: \"center\",\n            backgroundSize: \"cover\",\n            height: \"500px\",\n            backgroundImage: \"url(./assets/mobileOnly.jpg)\",\n            color: \"#ffffff\",\n            fontSize: \"25px\",\n            position: \"relative\"\n          }}\n        >\n          <p\n            style={{\n              position: \"absolute\",\n              bottom: \"80px\",\n              left: \"20px\",\n              backgroundColor: \"#191a21\",\n              color: \"#ffffff\",\n              paddingLeft: \"20px\",\n              paddingRight: \"20px\",\n              width: \"300px\"\n            }}\n          >\n            This is Mobile only version, please view the page in mobile or use\n            browser devtools to toggle device view and then refresh the page.\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return { movies: state.movies, search: state.search };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    actions: bindActionCreators(\n      { getMovies, updateSearchKey, filterMovies, asyncFilterMovies },\n      dispatch\n    )\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n","import { combineReducers } from \"redux\";\n\nconst initalState = [];\n\nconst moviesReducer = (state = initalState, action) => {\n  switch (action.type) {\n    case \"GET_MOVIES\":\n      return [...action.movies];\n    case \"Filter_MOVIES\":\n      if (action.key.trim().length < 1) {\n        return [...state];\n      }\n      const regex = RegExp(`${action.key.toLowerCase()}`);\n      let newState = state.filter(\n        movie => regex.test(movie.name.toLowerCase())\n        // movie.name.toString().toLowerCase() ===\n        // action.key.toString().toLowerCase()\n        //regex.test(movie.name.toLowerCase())\n        //action.key.toLowerCase()\n      );\n      return [...newState];\n    default:\n      return state;\n  }\n};\n\nconst searchReducer = (state = { searchKey: \"\" }, action) => {\n  switch (action.type) {\n    case \"UPDATE_SEARCH_KEY\":\n      return { ...state, ...{ searchKey: action.key } };\n    default:\n      return state;\n  }\n};\n\nconst rootReducer = combineReducers({\n  movies: moviesReducer,\n  search: searchReducer\n});\n\nexport default rootReducer;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport thunk from \"redux-thunk\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\n\nimport App from \"./components/app\";\nimport reducers from \"./reducers\";\n\nconst store = createStore(\n  reducers,\n  composeWithDevTools(applyMiddleware(thunk))\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}