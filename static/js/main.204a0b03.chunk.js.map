{"version":3,"sources":["actions/index.js","components/app.js","reducers/index.js","index.js"],"names":["updateSearchKey","key","type","filterMovies","asyncFilterMovies","dispatch","Promise","resolve","reject","then","getMovies","page","flush","console","log","concat","axios","get","res","movies","getMoviesX","data","content","catch","error","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleScroll","event","window","innerHeight","scrollY","document","body","offsetHeight","state","setState","fetchMovies","posts","searchKey","init","isVisible","isMobile","handleSearch","bind","assertThisInitialized","showHead","onKeyDown","actions","addEventListener","removeEventListener","image","index","length","react_default","a","createElement","LazyLoad_default","height","style","alignItems","overflow","width","src","alt","_this2","map","post","Col","xs","float","marginBottom","marginRight","marginLeft","display","paddingBottom","genImage","color","fontSize","name","e","preventDefault","target","value","trim","search","keyCode","_this3","position","top","marginTop","maxHeight","paddingTop","onChange","border","backgroundColor","outline","onClick","paddingRight","renderMovies","showPosts","renderHead","className","Grid","Row","right","padding","margin","backgroundPosition","backgroundSize","backgroundImage","bottom","left","paddingLeft","Component","connect","bindActionCreators","initalState","rootReducer","combineReducers","arguments","undefined","action","toConsumableArray","regex","RegExp","toLowerCase","newState","filter","movie","test","objectSpread","store","createStore","reducers","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","es","app","getElementById"],"mappings":"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","file":"static/js/main.204a0b03.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport const getMovies2 = movies => ({\n  type: \"GET_MOVIES\",\n  movies\n});\n\nexport const getMoviesX = movies => ({\n  type: \"GET_MOVIES_X\",\n  movies\n});\n\nexport const updateSearchKey = key => ({\n  type: \"UPDATE_SEARCH_KEY\",\n  key\n});\n\nexport const filterMovies = key => ({\n  type: \"Filter_MOVIES\",\n  key\n});\n\nexport const asyncFilterMovies = key => {\n  return dispatch => {\n    new Promise((resolve, reject) => {\n      //dispatch(getMovies(1));\n      resolve();\n    }).then(() => {\n      dispatch(filterMovies(key));\n    });\n  };\n};\n\nexport const getMovies = (page, flush) => {\n  return dispatch => {\n    console.log(`getting async movies for page ${page} with flush ${flush}`);\n    axios\n      .get(`CONTENTLISTINGPAGE-PAGE${page}.json`)\n      .then(res => {\n        if (!flush) {\n          dispatch(getMovies2(res.data.page[\"content-items\"].content));\n        } else {\n          dispatch(getMoviesX(res.data.page[\"content-items\"].content));\n        }\n      })\n      .catch(error => {\n        console.log(`error: ${error}`);\n      });\n  };\n};\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { Grid, Row, Col } from \"react-bootstrap\";\nimport LazyLoad from \"react-lazy-load\";\nimport { isMobile } from \"react-device-detect\";\nimport {\n  getMovies,\n  updateSearchKey,\n  filterMovies,\n  asyncFilterMovies\n} from \"../actions\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      posts: [],\n      searchKey: \"\",\n      page: 1,\n      init: true,\n      isVisible: false,\n      isMobile: false\n    };\n    this.handleSearch = this.handleSearch.bind(this);\n    this.showHead = this.showHead.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.actions.getMovies(this.state.page, false);\n    window.addEventListener(\"scroll\", this.handleScroll);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  }\n\n  genImage(image, index, length) {\n    return (\n      <LazyLoad height=\"auto\">\n        <div\n          style={{\n            alignItems: \"center\",\n            overflow: \"hidden\"\n          }}\n        >\n          <img\n            style={{\n              width: \"100%\"\n            }}\n            src={\n              `./assets/${image}` ||\n              `./assets/placeholder_for_missing_posters.png`\n            }\n            alt={`./assets/placeholder_for_missing_posters.png`}\n          />\n        </div>\n      </LazyLoad>\n    );\n  }\n\n  showPosts() {\n    return this.props.movies.length > 1 ? (\n      this.props.movies.map((post, index) => {\n        const image = post[\"poster-image\"];\n        return (\n          <Col\n            xs={4}\n            key={index}\n            style={{\n              float: \"left\",\n              marginBottom: \"45px\",\n              marginRight: \"0px\",\n              marginLeft: \"0px\"\n            }}\n          >\n            <div\n              style={{\n                display: \"inline-block\"\n              }}\n            >\n              <div style={{ paddingBottom: \"10px\" }}>\n                {this.genImage(image, index, this.props.movies.length)}\n              </div>\n              <p style={{ color: \"#ffffff\", fontSize: \"3vw\" }}>{post.name}</p>\n            </div>\n          </Col>\n        );\n      })\n    ) : (\n      <div>Loading...</div>\n    );\n  }\n\n  handleSearch(e) {\n    e.preventDefault();\n    this.setState({ searchKey: e.target.value });\n    if (e.target.value.trim().length > 1) {\n      this.props.actions.updateSearchKey(this.state.searchKey);\n      this.props.actions.asyncFilterMovies(this.props.search.searchKey);\n    }\n    return;\n  }\n\n  onKeyDown(e) {\n    if (e.keyCode === 8) {\n      this.setState({ page: 1 });\n      this.setState({ searchKey: \"\" });\n      this.props.actions.getMovies(1, true);\n      this.props.actions.updateSearchKey(\"\");\n    }\n  }\n\n  showHead() {\n    return (\n      <div style={{ position: \"sticky\", top: \"0\" }}>\n        <div\n          style={{\n            marginTop: \"30px\",\n            marginBottom: \"30px\",\n            maxHeight: \"190px\"\n          }}\n        >\n          <input\n            type=\"image\"\n            src=\"./assets/Back.png\"\n            alt=\"back\"\n            width=\"28\"\n            height=\"28\"\n            style={{ display: \"inline\", float: \"left\", paddingTop: \"0px\" }}\n          />\n          <span>\n            <input\n              type=\"text\"\n              onChange={e => this.handleSearch(e)}\n              onKeyDown={this.onKeyDown}\n              value={this.state.searchKey}\n              style={{\n                border: \"1px solid #2c2c2d\",\n                display: \"inline\",\n                backgroundColor: \"#131314\",\n                color: \"#ffffff\",\n                fontSize: \"4vw\",\n                marginLeft: \"20px\",\n                outline: \"none\"\n              }}\n            />\n          </span>\n          <input\n            type=\"image\"\n            src=\"./assets/search.png\"\n            alt=\"search\"\n            width=\"48\"\n            height=\"28\"\n            onClick={e => this.handleSearch(e)}\n            style={{\n              display: \"inline\",\n              float: \"right\",\n              paddingTop: \"0px\",\n              paddingRight: \"20px\"\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n  fetchMovies(page) {\n    console.log(`new movies for page ${page}`);\n    this.props.actions.getMovies(this.state.page, false);\n  }\n\n  handleScroll = event => {\n    if (\n      window.innerHeight + window.scrollY >=\n      document.body.offsetHeight - 400\n    ) {\n      if (this.state.page < 3) {\n        this.setState({ page: this.state.page + 1 });\n        this.fetchMovies(this.state.page);\n      }\n\n      console.log(`looks like yeah `);\n    }\n  };\n\n  render() {\n    const renderMovies = this.showPosts();\n    const renderHead = this.showHead();\n    return isMobile ? (\n      <div className=\"\">\n        <div>{renderHead}</div>\n        <Grid>\n          <div>\n            <Row>{renderMovies}</Row>\n          </div>\n        </Grid>\n      </div>\n    ) : (\n      <div>\n        <p\n          style={{\n            color: \"#ffffff\",\n            fontSize: \"25px\",\n            paddingTop: \"30px\",\n            right: \"50%\"\n          }}\n        >\n          React JS/ Workshop/ Diagnal technologies\n        </p>\n        <div\n          style={{\n            padding: 0,\n            margin: 0,\n            marginTop: \"30px\",\n            backgroundPosition: \"center\",\n            backgroundSize: \"cover\",\n            height: \"500px\",\n            backgroundImage: \"url(./assets/mobileOnly.jpg)\",\n            color: \"#ffffff\",\n            fontSize: \"25px\",\n            position: \"relative\"\n          }}\n        >\n          <p\n            style={{\n              position: \"absolute\",\n              bottom: \"80px\",\n              left: \"20px\",\n              backgroundColor: \"#191a21\",\n              color: \"#ffffff\",\n              paddingLeft: \"20px\",\n              paddingRight: \"20px\",\n              width: \"300px\"\n            }}\n          >\n            This is Mobile only version, please view the page in mobile or use\n            browser devtools to toggle device view and then refresh the page.\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return { movies: state.movies, search: state.search };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    actions: bindActionCreators(\n      { getMovies, updateSearchKey, filterMovies, asyncFilterMovies },\n      dispatch\n    )\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n","import { combineReducers } from \"redux\";\n\nconst initalState = [];\n\nconst moviesReducer = (state = initalState, action) => {\n  switch (action.type) {\n    case \"GET_MOVIES\":\n      return [...state, ...action.movies];\n    case \"GET_MOVIES_X\":\n      return [...action.movies];\n    case \"Filter_MOVIES\":\n      if (action.key.trim().length < 1) {\n        return [...state];\n      }\n      const regex = RegExp(`${action.key.toLowerCase()}`);\n      let newState = state.filter(\n        movie => regex.test(movie.name.toLowerCase())\n        // movie.name.toString().toLowerCase() ===\n        // action.key.toString().toLowerCase()\n        //regex.test(movie.name.toLowerCase())\n        //action.key.toLowerCase()\n      );\n      return [...newState];\n    default:\n      return state;\n  }\n};\n\nconst searchReducer = (state = { searchKey: \"\" }, action) => {\n  switch (action.type) {\n    case \"UPDATE_SEARCH_KEY\":\n      return { ...state, ...{ searchKey: action.key } };\n    default:\n      return state;\n  }\n};\n\nconst rootReducer = combineReducers({\n  movies: moviesReducer,\n  search: searchReducer\n});\n\nexport default rootReducer;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport thunk from \"redux-thunk\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\n\nimport App from \"./components/app\";\nimport reducers from \"./reducers\";\n\nconst store = createStore(\n  reducers,\n  composeWithDevTools(applyMiddleware(thunk))\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}